<!DOCTYPE html>
<html>
<head>
  <title>test</title>
</head>
<body>
  <div id="first">
    <p id="p1">p1</p>
    <p id="p2">p2</p>
  </div>

  <div id="second">
    <p id="p3">p3</p>
  </div>

  <div id="third">
    <button id="clickme">click me</button>
  </div>

  <script type="text/javascript">
    let button = document.getElementById('clickme');
    button.addEventListener('click', clickme)

    let count = 1

    function clickme() {
      if (count == 1) {
        let target = document.createElement("p");
        let targetTextNode = document.createTextNode("foo");
        target.appendChild(targetTextNode);

        let div1 = document.getElementById("first");
        div1.appendChild(target);
        target.id = "foo"

        count ++;
      } else if (count == 2) {
        let child = document.getElementById("foo");
        child.parentNode.removeChild(child)

        count ++;
      } else if (count == 3) {
        let target = document.createElement("p");
        let targetTextNode = document.createTextNode("foo");
        target.appendChild(targetTextNode);

        let div1 = document.getElementById("first");
        let child = document.getElementById("p2");
        div1.insertBefore(target, child);
        target.id = "foo"

        count ++;
      } else if (count == 4) {
        let target = document.createElement("p");
        let targetTextNode = document.createTextNode("bar");
        target.appendChild(targetTextNode);

        let child = document.getElementById("foo");
        child.parentNode.replaceChild(target, child);
        target.id = "bar";

        count ++;
      } else {
        console.log("no response");
      }
    }
  </script>
</body>
</html>